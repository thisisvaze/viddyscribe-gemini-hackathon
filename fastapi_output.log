INFO:     ('127.0.0.1', 37352) - "WebSocket /ws?client_id=1723253700782" [accepted]
2024-08-13 01:20:35,214 - INFO - WebSocket connection established for client 1723253700782
INFO:     ('127.0.0.1', 37352) - "WebSocket /ws?client_id=1723253700782" [accepted]
2024-08-13 01:20:35,214 - INFO - WebSocket connection established for client 1723253700782
INFO:     connection open
INFO:     connection open
2024-08-13 01:20:35,640 - INFO - Received file: er34we.mp4
2024-08-13 01:20:35,640 - INFO - Received add_bg_music: False
2024-08-13 01:20:35,640 - INFO - Received client_id: 1723253700782
2024-08-13 01:20:35,640 - INFO - Received file: er34we.mp4
2024-08-13 01:20:35,640 - INFO - Received add_bg_music: False
2024-08-13 01:20:35,640 - INFO - Received client_id: 1723253700782
2024-08-13 01:20:35,640 - INFO - Headers: {'host': '127.0.0.1:8000', 'x-real-ip': '135.19.170.38', 'x-forwarded-for': '135.19.170.38,::ffff:127.0.0.1,::ffff:127.0.0.1', 'x-forwarded-proto': 'https,http,http', 'connection': 'close', 'content-length': '6474120', 'sec-ch-ua': '"Not)A;Brand";v="99", "Microsoft Edge";v="127", "Chromium";v="127"', 'accept': 'application/json, text/plain, */*', 'sec-ch-ua-platform': '"macOS"', 'sec-ch-ua-mobile': '?0', 'authorization': 'Bearer viddysc-8f6f7d0195efd6a0e11581e0caa26c140347392dee1a18698c7b1dd1fac46cd6', 'user-agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/127.0.0.0 Safari/537.36 Edg/127.0.0.0', 'content-type': 'multipart/form-data; boundary=----WebKitFormBoundaryngkRqf443ANXJNcz', 'origin': 'https://app.viddyscribe.com', 'sec-fetch-site': 'same-origin', 'sec-fetch-mode': 'cors', 'sec-fetch-dest': 'empty', 'referer': 'https://app.viddyscribe.com/', 'accept-encoding': 'gzip, deflate, br, zstd', 'accept-language': 'en-CA,en-US;q=0.9,en;q=0.8', 'cookie': 'clientId=1723253700782', 'x-forwarded-port': '80,80', 'x-forwarded-host': 'app.viddyscribe.com'}
2024-08-13 01:20:35,640 - INFO - Form data: FormData([('file', UploadFile(filename='er34we.mp4', size=6473724, headers=Headers({'content-disposition': 'form-data; name="file"; filename="er34we.mp4"', 'content-type': 'video/mp4'}))), ('add_bg_music', 'false'), ('client_id', '1723253700782')])
2024-08-13 01:20:35,640 - INFO - Headers: {'host': '127.0.0.1:8000', 'x-real-ip': '135.19.170.38', 'x-forwarded-for': '135.19.170.38,::ffff:127.0.0.1,::ffff:127.0.0.1', 'x-forwarded-proto': 'https,http,http', 'connection': 'close', 'content-length': '6474120', 'sec-ch-ua': '"Not)A;Brand";v="99", "Microsoft Edge";v="127", "Chromium";v="127"', 'accept': 'application/json, text/plain, */*', 'sec-ch-ua-platform': '"macOS"', 'sec-ch-ua-mobile': '?0', 'authorization': 'Bearer viddysc-8f6f7d0195efd6a0e11581e0caa26c140347392dee1a18698c7b1dd1fac46cd6', 'user-agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/127.0.0.0 Safari/537.36 Edg/127.0.0.0', 'content-type': 'multipart/form-data; boundary=----WebKitFormBoundaryngkRqf443ANXJNcz', 'origin': 'https://app.viddyscribe.com', 'sec-fetch-site': 'same-origin', 'sec-fetch-mode': 'cors', 'sec-fetch-dest': 'empty', 'referer': 'https://app.viddyscribe.com/', 'accept-encoding': 'gzip, deflate, br, zstd', 'accept-language': 'en-CA,en-US;q=0.9,en;q=0.8', 'cookie': 'clientId=1723253700782', 'x-forwarded-port': '80,80', 'x-forwarded-host': 'app.viddyscribe.com'}
2024-08-13 01:20:35,640 - INFO - Form data: FormData([('file', UploadFile(filename='er34we.mp4', size=6473724, headers=Headers({'content-disposition': 'form-data; name="file"; filename="er34we.mp4"', 'content-type': 'video/mp4'}))), ('add_bg_music', 'false'), ('client_id', '1723253700782')])
2024-08-13 01:20:35,650 - INFO - File saved to temp/1723253700782_er34we.mp4
2024-08-13 01:20:35,650 - INFO - File saved to temp/1723253700782_er34we.mp4
2024-08-13 01:20:35,747 - INFO - Video processing started for temp/1723253700782_er34we.mp4
2024-08-13 01:20:35,747 - INFO - Video processing started for temp/1723253700782_er34we.mp4
INFO:     ::ffff:127.0.0.1:0 - "POST /api/create_video HTTP/1.1" 200 OK
INFO:     ::ffff:127.0.0.1:0 - "POST /api/create_video HTTP/1.1" 200 OK
2024-08-13 01:20:35,845 - INFO - Video loaded successfully. Duration: 20.05 seconds
2024-08-13 01:20:35,845 - INFO - Video loaded successfully. Duration: 20.05 seconds
INFO:     ('127.0.0.1', 37374) - "WebSocket /ws?client_id=1723253700782" [accepted]
INFO:     ('127.0.0.1', 37374) - "WebSocket /ws?client_id=1723253700782" [accepted]
2024-08-13 01:20:36,764 - WARNING - Client 1723253700782 already has an active connection. Replacing the old connection.
2024-08-13 01:20:36,764 - WARNING - Client 1723253700782 already has an active connection. Replacing the old connection.
INFO:     connection open
INFO:     connection open
2024-08-13 01:20:36,811 - INFO - WebSocket connection established for client 1723253700782
2024-08-13 01:20:36,811 - INFO - WebSocket connection established for client 1723253700782
INFO:     connection closed
2024-08-13 01:20:36,811 - INFO - WebSocket connection closed for client 1723253700782
INFO:     connection closed
2024-08-13 01:20:36,811 - INFO - WebSocket connection closed for client 1723253700782
INFO:     ::ffff:127.0.0.1:0 - "GET /api/check_status?client_id=1723253700782&file_name=er34we.mp4 HTTP/1.1" 200 OK
INFO:     ::ffff:127.0.0.1:0 - "GET /api/check_status?client_id=1723253700782&file_name=er34we.mp4 HTTP/1.1" 200 OK
INFO:     ::ffff:127.0.0.1:0 - "GET /api/check_status?client_id=1723253700782&file_name=er34we.mp4 HTTP/1.1" 200 OK
INFO:     ::ffff:127.0.0.1:0 - "GET /api/check_status?client_id=1723253700782&file_name=er34we.mp4 HTTP/1.1" 200 OK
2024-08-13 01:20:51,167 - INFO - Description: no timestamps returned from Gemini. 

2024-08-13 01:20:51,167 - INFO - Description: no timestamps returned from Gemini. 

2024-08-13 01:20:51,167 - ERROR - No timestamps found in the description returned by gemini.
2024-08-13 01:20:51,167 - ERROR - Error during video processing: Failed to generate response audio timestamps
2024-08-13 01:20:51,167 - ERROR - Error during video processing: Failed to generate response audio timestamps
2024-08-13 01:20:51,167 - ERROR - No timestamps found in the description returned by gemini.
2024-08-13 01:20:51,167 - ERROR - Error during video processing: Failed to generate response audio timestamps
2024-08-13 01:20:51,167 - ERROR - Error during video processing: Failed to generate response audio timestamps
2024-08-13 01:20:51,167 - INFO - Deleted audio file temp/1723253700782_er34we.wav
2024-08-13 01:20:51,167 - INFO - Deleted audio file temp/1723253700782_er34we.wav
2024-08-13 01:20:51,304 - INFO - WebSocket connection closed for client 1723253700782
2024-08-13 01:20:51,304 - INFO - WebSocket connection closed for client 1723253700782
INFO:     connection closed
2024-08-13 01:20:51,305 - INFO - WebSocket connection closed for client 1723253700782
INFO:     connection closed
2024-08-13 01:20:51,305 - INFO - WebSocket connection closed for client 1723253700782
INFO:     ::ffff:127.0.0.1:0 - "GET /api/check_status?client_id=1723238872747 HTTP/1.1" 400 Bad Request
INFO:     ::ffff:127.0.0.1:0 - "GET /api/check_status?client_id=1723238872747 HTTP/1.1" 400 Bad Request
2024-08-13 01:21:23,617 - INFO - Received file: er34we.mp4
2024-08-13 01:21:23,617 - INFO - Received add_bg_music: False
2024-08-13 01:21:23,617 - INFO - Received client_id: 1723253700782
2024-08-13 01:21:23,617 - INFO - Received file: er34we.mp4
2024-08-13 01:21:23,617 - INFO - Received add_bg_music: False
2024-08-13 01:21:23,617 - INFO - Received client_id: 1723253700782
2024-08-13 01:21:23,617 - INFO - Headers: {'host': '127.0.0.1:8000', 'x-real-ip': '135.19.170.38', 'x-forwarded-for': '135.19.170.38,::ffff:127.0.0.1,::ffff:127.0.0.1', 'x-forwarded-proto': 'https,http,http', 'connection': 'close', 'content-length': '6474120', 'sec-ch-ua': '"Not)A;Brand";v="99", "Microsoft Edge";v="127", "Chromium";v="127"', 'accept': 'application/json, text/plain, */*', 'sec-ch-ua-platform': '"macOS"', 'sec-ch-ua-mobile': '?0', 'authorization': 'Bearer viddysc-8f6f7d0195efd6a0e11581e0caa26c140347392dee1a18698c7b1dd1fac46cd6', 'user-agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/127.0.0.0 Safari/537.36 Edg/127.0.0.0', 'content-type': 'multipart/form-data; boundary=----WebKitFormBoundaryzLYCmhpMJBHK2Gve', 'origin': 'https://app.viddyscribe.com', 'sec-fetch-site': 'same-origin', 'sec-fetch-mode': 'cors', 'sec-fetch-dest': 'empty', 'referer': 'https://app.viddyscribe.com/', 'accept-encoding': 'gzip, deflate, br, zstd', 'accept-language': 'en-CA,en-US;q=0.9,en;q=0.8', 'cookie': 'clientId=1723253700782', 'x-forwarded-port': '80,80', 'x-forwarded-host': 'app.viddyscribe.com'}
2024-08-13 01:21:23,617 - INFO - Form data: FormData([('file', UploadFile(filename='er34we.mp4', size=6473724, headers=Headers({'content-disposition': 'form-data; name="file"; filename="er34we.mp4"', 'content-type': 'video/mp4'}))), ('add_bg_music', 'false'), ('client_id', '1723253700782')])
2024-08-13 01:21:23,617 - INFO - Headers: {'host': '127.0.0.1:8000', 'x-real-ip': '135.19.170.38', 'x-forwarded-for': '135.19.170.38,::ffff:127.0.0.1,::ffff:127.0.0.1', 'x-forwarded-proto': 'https,http,http', 'connection': 'close', 'content-length': '6474120', 'sec-ch-ua': '"Not)A;Brand";v="99", "Microsoft Edge";v="127", "Chromium";v="127"', 'accept': 'application/json, text/plain, */*', 'sec-ch-ua-platform': '"macOS"', 'sec-ch-ua-mobile': '?0', 'authorization': 'Bearer viddysc-8f6f7d0195efd6a0e11581e0caa26c140347392dee1a18698c7b1dd1fac46cd6', 'user-agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/127.0.0.0 Safari/537.36 Edg/127.0.0.0', 'content-type': 'multipart/form-data; boundary=----WebKitFormBoundaryzLYCmhpMJBHK2Gve', 'origin': 'https://app.viddyscribe.com', 'sec-fetch-site': 'same-origin', 'sec-fetch-mode': 'cors', 'sec-fetch-dest': 'empty', 'referer': 'https://app.viddyscribe.com/', 'accept-encoding': 'gzip, deflate, br, zstd', 'accept-language': 'en-CA,en-US;q=0.9,en;q=0.8', 'cookie': 'clientId=1723253700782', 'x-forwarded-port': '80,80', 'x-forwarded-host': 'app.viddyscribe.com'}
2024-08-13 01:21:23,617 - INFO - Form data: FormData([('file', UploadFile(filename='er34we.mp4', size=6473724, headers=Headers({'content-disposition': 'form-data; name="file"; filename="er34we.mp4"', 'content-type': 'video/mp4'}))), ('add_bg_music', 'false'), ('client_id', '1723253700782')])
2024-08-13 01:21:23,630 - INFO - File saved to temp/1723253700782_er34we.mp4
2024-08-13 01:21:23,630 - INFO - File saved to temp/1723253700782_er34we.mp4
2024-08-13 01:21:23,727 - INFO - Video processing started for temp/1723253700782_er34we.mp4
2024-08-13 01:21:23,727 - INFO - Video processing started for temp/1723253700782_er34we.mp4
INFO:     ::ffff:127.0.0.1:0 - "POST /api/create_video HTTP/1.1" 200 OK
INFO:     ::ffff:127.0.0.1:0 - "POST /api/create_video HTTP/1.1" 200 OK
2024-08-13 01:21:23,825 - INFO - Video loaded successfully. Duration: 20.05 seconds
2024-08-13 01:21:23,825 - INFO - Video loaded successfully. Duration: 20.05 seconds
2024-08-13 01:21:38,417 - INFO - Description: no timestamps returned from Gemini. 

2024-08-13 01:21:38,417 - INFO - Description: no timestamps returned from Gemini. 

2024-08-13 01:21:38,417 - ERROR - No timestamps found in the description returned by gemini.
2024-08-13 01:21:38,417 - ERROR - Error during video processing: Failed to generate response audio timestamps
2024-08-13 01:21:38,417 - ERROR - Error during video processing: Failed to generate response audio timestamps
2024-08-13 01:21:38,417 - ERROR - No timestamps found in the description returned by gemini.
2024-08-13 01:21:38,417 - ERROR - Error during video processing: Failed to generate response audio timestamps
2024-08-13 01:21:38,417 - ERROR - Error during video processing: Failed to generate response audio timestamps
2024-08-13 01:21:38,417 - INFO - Deleted audio file temp/1723253700782_er34we.wav
2024-08-13 01:21:38,417 - INFO - Deleted audio file temp/1723253700782_er34we.wav
INFO:     Shutting down
INFO:     Shutting down
INFO:     Shutting down
INFO:     Shutting down
INFO:     Shutting down
INFO:     Shutting down
INFO:     connection closed
INFO:     connection closed
2024-08-13 01:22:13,082 - INFO - WebSocket connection closed for client 1723238872747
2024-08-13 01:22:13,082 - INFO - WebSocket connection closed for client 1723253700782
INFO:     connection closed
INFO:     connection closed
2024-08-13 01:22:13,082 - INFO - WebSocket connection closed for client 1723238872747
2024-08-13 01:22:13,082 - INFO - WebSocket connection closed for client 1723253700782
INFO:     Shutting down
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [2249974]
INFO:     Application shutdown complete.
INFO:     Finished server process [2249974]
Time taken for response: 5.91632604598999 seconds
{'Gemini response': "Here are the concise audio description instructions for the video:\n\n* **Video Purpose and Genre:** Advertisement for RepairSmith auto starting batteries.\n\n* **Key Visual Elements and Actions:** \n    * **Mechanic working on car:** Describe the mechanic installing a battery in a customer's driveway. \n    * **Car battery close-up:** Mention the RepairSmith branding and warranty details displayed on the batteries.\n    * **Hand pressing car start button:** Emphasize the successful engine start after battery installation.\n\n* **Audio Considerations:** Upbeat music plays throughout; occasional text on screen reinforces key selling points.\n\n* **Special Instructions:**  Ensure descriptions clearly convey the convenience and reliability of RepairSmith's battery replacement service. \n\n* **Description Style:**  Use a positive and informative tone. Briefly highlight the benefits of choosing RepairSmith (powerful batteries, long lifespan, expert installation). \n"}
Time taken for response: 4.716159105300903 seconds
{'Gemini response': 'Okay, I\'m ready to create audio descriptions for your video. Please provide the video link or file, and any character details or specific instructions you have. \n\nFor example, you could tell me:\n\n* **Character names and descriptions:** "The mechanic is a man in his 30s with short brown hair wearing a black RepairSmith polo shirt." \n* **Key visual elements to emphasize:** "Focus on the car battery installation process and any tools used." \n* **Overall tone and style:** "Keep the descriptions concise and informative, targeting a general audience."\n\nThe more information you give me, the better I can tailor the audio descriptions to your video. \n'}
Time taken for response: 0.4008171558380127 seconds
{'Gemini response': 'no timestamps returned from Gemini. \n'}
Time taken for response: 5.91632604598999 seconds
{'Gemini response': "Here are the concise audio description instructions for the video:\n\n* **Video Purpose and Genre:** Advertisement for RepairSmith auto starting batteries.\n\n* **Key Visual Elements and Actions:** \n    * **Mechanic working on car:** Describe the mechanic installing a battery in a customer's driveway. \n    * **Car battery close-up:** Mention the RepairSmith branding and warranty details displayed on the batteries.\n    * **Hand pressing car start button:** Emphasize the successful engine start after battery installation.\n\n* **Audio Considerations:** Upbeat music plays throughout; occasional text on screen reinforces key selling points.\n\n* **Special Instructions:**  Ensure descriptions clearly convey the convenience and reliability of RepairSmith's battery replacement service. \n\n* **Description Style:**  Use a positive and informative tone. Briefly highlight the benefits of choosing RepairSmith (powerful batteries, long lifespan, expert installation). \n"}
Time taken for response: 4.716159105300903 seconds
{'Gemini response': 'Okay, I\'m ready to create audio descriptions for your video. Please provide the video link or file, and any character details or specific instructions you have. \n\nFor example, you could tell me:\n\n* **Character names and descriptions:** "The mechanic is a man in his 30s with short brown hair wearing a black RepairSmith polo shirt." \n* **Key visual elements to emphasize:** "Focus on the car battery installation process and any tools used." \n* **Overall tone and style:** "Keep the descriptions concise and informative, targeting a general audience."\n\nThe more information you give me, the better I can tailor the audio descriptions to your video. \n'}
Time taken for response: 0.4008171558380127 seconds
{'Gemini response': 'no timestamps returned from Gemini. \n'}
INFO:     Waiting for application shutdown.
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [2249972]
INFO:     Application shutdown complete.
INFO:     Finished server process [2249972]
INFO:     Waiting for application shutdown.
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [2249975]
INFO:     Application shutdown complete.
INFO:     Finished server process [2249975]
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [2249973]
INFO:     Finished server process [2249973]
Time taken for response: 5.62595272064209 seconds
{'Gemini response': 'Here are the audio description instructions for the video:\n\n## Video Analysis for Audio Description:\n\n**1. Video Purpose and Genre:**\n   - **Purpose:**  Advertisement \n   - **Genre:** Product-focused \n\n**2. Key Visual Elements and Actions:**\n   - **Focus:** Car battery installation process, RepairSmith van \n   - **Actions:** Mechanic working on car engine, close-up of battery being connected, van arriving at a house \n\n**3. Audio Considerations:**\n   - Upbeat music throughout\n   - Text on screen highlights key features and benefits \n\n**4. Special Instructions:**\n   - Clearly describe the RepairSmith van and its branding (logo, "Car Repair Delivered" tagline).\n   - Emphasize the ease and convenience of the at-home installation service.\n\n**5. Description Style:**\n   -  Positive and upbeat tone to match the advertisement\'s style. \n'}
Time taken for response: 4.28681206703186 seconds
{'Gemini response': 'Okay, I\'m ready to create audio descriptions for your video. Please provide:\n\n1. **The video itself:** You can upload it directly if possible, or provide a link to where I can access it. \n2. **Character/Person Information:** For each individual who appears on screen and should be identified in the descriptions, please provide:\n    - A brief description (e.g., "Mechanic in a black shirt," "Woman with blonde hair driving a car")\n    - Any names used to refer to them in the video.\n\nOnce I have this information, I can start generating your audio descriptions. \n'}
Time taken for response: 0.3903660774230957 seconds
{'Gemini response': 'no timestamps returned from Gemini. \n'}
Time taken for response: 5.62595272064209 seconds
{'Gemini response': 'Here are the audio description instructions for the video:\n\n## Video Analysis for Audio Description:\n\n**1. Video Purpose and Genre:**\n   - **Purpose:**  Advertisement \n   - **Genre:** Product-focused \n\n**2. Key Visual Elements and Actions:**\n   - **Focus:** Car battery installation process, RepairSmith van \n   - **Actions:** Mechanic working on car engine, close-up of battery being connected, van arriving at a house \n\n**3. Audio Considerations:**\n   - Upbeat music throughout\n   - Text on screen highlights key features and benefits \n\n**4. Special Instructions:**\n   - Clearly describe the RepairSmith van and its branding (logo, "Car Repair Delivered" tagline).\n   - Emphasize the ease and convenience of the at-home installation service.\n\n**5. Description Style:**\n   -  Positive and upbeat tone to match the advertisement\'s style. \n'}
Time taken for response: 4.28681206703186 seconds
{'Gemini response': 'Okay, I\'m ready to create audio descriptions for your video. Please provide:\n\n1. **The video itself:** You can upload it directly if possible, or provide a link to where I can access it. \n2. **Character/Person Information:** For each individual who appears on screen and should be identified in the descriptions, please provide:\n    - A brief description (e.g., "Mechanic in a black shirt," "Woman with blonde hair driving a car")\n    - Any names used to refer to them in the video.\n\nOnce I have this information, I can start generating your audio descriptions. \n'}
Time taken for response: 0.3903660774230957 seconds
{'Gemini response': 'no timestamps returned from Gemini. \n'}
INFO:     Received SIGINT, exiting.
INFO:     Received SIGINT, exiting.
INFO:     Terminated child process [2249972]
INFO:     Terminated child process [2249973]
INFO:     Terminated child process [2249974]
INFO:     Terminated child process [2249975]
INFO:     Waiting for child process [2249972]
INFO:     Terminated child process [2249972]
INFO:     Terminated child process [2249973]
INFO:     Terminated child process [2249974]
INFO:     Terminated child process [2249975]
INFO:     Waiting for child process [2249972]
INFO:     Waiting for child process [2249973]
INFO:     Waiting for child process [2249973]
INFO:     Waiting for child process [2249974]
INFO:     Waiting for child process [2249974]
INFO:     Waiting for child process [2249975]
INFO:     Waiting for child process [2249975]
INFO:     Stopping parent process [2249938]
INFO:     Stopping parent process [2249938]
